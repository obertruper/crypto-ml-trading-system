# XGBoost v3.0 - ML Crypto Trading System

## üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ v3.0

XGBoost v3.0 - —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏–ø—Ç–æ—Ç—Ä–µ–π–¥–∏–Ω–≥–∞ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π.

### ‚úÖ –ì–ª–∞–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- **Optuna –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥–±–æ—Ä –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (100+ –ø–æ–ø—ã—Ç–æ–∫)
- **Feature Selection**: –≤—ã–±–æ—Ä 60 –ª—É—á—à–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∏–∑ 112+ 
- **ADASYN –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞**: –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–±–æ—Ä–∫–∞
- **–ü–æ–≤—ã—à–µ–Ω–Ω—ã–π –ø–æ—Ä–æ–≥**: 1.5% –≤–º–µ—Å—Ç–æ 0.5% –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —à—É–º–∞
- **–£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: max_depth=8, learning_rate=0.03, —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã**: –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ config/constants.py
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏**: decimal —Ç–∏–ø—ã, SMOTE –∏–Ω–¥–µ–∫—Å—ã, –≤—ã–±–æ—Ä –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

### üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- ROC-AUC: >0.75 (–±—ã–ª–æ 0.60)
- Precision: >40% (–±—ã–ª–æ 26%)
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤ —Ç–æ–ø-10 –≤–∞–∂–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
xgboost_v3/
‚îú‚îÄ‚îÄ config/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ settings.py      # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ features_config.py # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
‚îú‚îÄ‚îÄ data/               # –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ loader.py       # –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ preprocessor.py # –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ feature_engineer.py # –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
‚îú‚îÄ‚îÄ models/             # –ú–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ xgboost_trainer.py # –û–±—É—á–µ–Ω–∏–µ XGBoost
‚îÇ   ‚îú‚îÄ‚îÄ ensemble.py     # –ê–Ω—Å–∞–º–±–ª–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã
‚îÇ   ‚îî‚îÄ‚îÄ optimizer.py    # Optuna –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ utils/              # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ metrics.py      # –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ balancing.py    # –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –∫–ª–∞—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ visualization.py # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ cache.py        # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îî‚îÄ‚îÄ main.py             # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç

```

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –°–æ–∑–¥–∞–Ω–∏–µ requirements.txt –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
pip install xgboost pandas numpy scikit-learn optuna matplotlib seaborn psycopg2-binary pyyaml tqdm joblib imblearn
```

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é —Å 7 —Ä–µ–∂–∏–º–∞–º–∏
python run_xgboost_v3.py

# –†–µ–∂–∏–º—ã 1 –∏ 2 - –æ–±–∞ —Å –ü–û–õ–ù–û–ô –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π:
# 1 - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç (–ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥)
# 2 - –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (—Ç–µ –∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥)

# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
python run_xgboost_v3.py --test-mode --optimize --ensemble-size 5
```

### 2. –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
python xgboost_v3/main.py --test-mode --optimize

# –ü–æ–ª–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–∞—Ö
python xgboost_v3/main.py --optimize --ensemble-size 5

# –†–µ–≥—Ä–µ—Å—Å–∏—è
python xgboost_v3/main.py --task regression --optimize
```

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
python show_xgboost_results.py

# –°—Ä–∞–≤–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∑–∞–ø—É—Å–∫–æ–≤
python show_xgboost_results.py --compare
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:

- `--task`: –¢–∏–ø –∑–∞–¥–∞—á–∏ (classification_binary, regression)
- `--test-mode`: –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –Ω–∞ 2 —Å–∏–º–≤–æ–ª–∞—Ö (BTCUSDT, ETHUSDT)
- `--optimize`: –ó–∞–ø—É—Å—Ç–∏—Ç—å Optuna –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `--ensemble-size N`: –†–∞–∑–º–µ—Ä –∞–Ω—Å–∞–º–±–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)
- `--no-cache`: –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à –¥–∞–Ω–Ω—ã—Ö
- `--config`: –ü—É—Ç—å –∫ YAML —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### ‚ö° –ù–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ v3.0:
- **–ü–æ—Ä–æ–≥ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏**: 1.5% (—É–≤–µ–ª–∏—á–µ–Ω —Å 0.5%)
- **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞**: ADASYN (–≤–º–µ—Å—Ç–æ SMOTE)
- **Feature selection**: —Ç–æ–ø-60 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –≤–∫–ª—é—á–µ–Ω–∞ –¥–ª—è test-mode –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:

```yaml
# config.yaml
database:
  host: localhost
  port: 5555
  database: crypto_trading
  user: ruslan

model:
  objective: binary:logistic
  max_depth: 6
  learning_rate: 0.01
  n_estimators: 1000

training:
  task_type: classification_binary
  test_mode: false
  ensemble_size: 3
  balance_method: smote
  classification_threshold: 0.5
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```bash
python xgboost_v3/main.py --config config.yaml
```

## üìä –ü—Ä–∏–∑–Ω–∞–∫–∏ (Features)

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 112+ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –Ω–∞ –≥—Ä—É–ø–ø—ã:

1. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (49)**
   - –¢—Ä–µ–Ω–¥–æ–≤—ã–µ: EMA, ADX, MACD, Ichimoku, SAR, Aroon
   - –û—Å—Ü–∏–ª–ª—è—Ç–æ—Ä—ã: RSI, Stochastic, CCI, Williams %R
   - –û–±—ä–µ–º–Ω—ã–µ: OBV, CMF, MFI
   - –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å: ATR, Bollinger Bands, Keltner, Donchian

2. **–†—ã–Ω–æ—á–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (13)**
   - –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ —Å BTC
   - –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–ª–∞
   - –†—ã–Ω–æ—á–Ω—ã–µ —Ä–µ–∂–∏–º—ã
   - –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏

3. **OHLC –ø—Ä–∏–∑–Ω–∞–∫–∏ (13)**
   - –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ü–µ–Ω—ã
   - –†–∞–∑–º–µ—Ä—ã —Å–≤–µ—á–µ–π
   - –†–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ MA

4. **–ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏**
   - –í–∑–≤–µ—à–µ–Ω–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
   - –î–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏–∏
   - –ü–∞—Ç—Ç–µ—Ä–Ω—ã —Å–≤–µ—á–µ–π
   - Volume profile

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è:
- üìÅ `logs/xgboost_v3_YYYYMMDD_HHMMSS/` - –æ—Å–Ω–æ–≤–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
- üìÑ `training.log` - –ø–æ–ª–Ω—ã–π –ª–æ–≥ –æ–±—É—á–µ–Ω–∏—è
- üìä `plots/` - –≤—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- üíæ `models/` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
- ‚öôÔ∏è `config.yaml` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∫–ª—é—á–∞—é—Ç:
- –ò—Å—Ç–æ—Ä–∏—è –æ–±—É—á–µ–Ω–∏—è
- Feature importance
- ROC –∫—Ä–∏–≤—ã–µ
- Confusion matrix
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Optuna

## üîß –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∑–∞–ø—É—Å–∫:

```python
from xgboost_v3 import Config, DataLoader, XGBoostTrainer

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
config = Config()
config.training.task_type = "regression"
config.training.test_mode = True

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
loader = DataLoader(config)
loader.connect()
df = loader.load_data()
loader.disconnect()

# –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
trainer = XGBoostTrainer(config)
# ... –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ
```

### –ö–∞—Å—Ç–æ–º–Ω–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞:

```python
from xgboost_v3.utils import BalanceStrategy

balancer = BalanceStrategy(config)
X_balanced, y_balanced = balancer.balance_data(X, y)
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞:
```python
from xgboost_v3.utils import CacheManager

cache = CacheManager()
info = cache.get_cache_info()
print(f"–ö—ç—à: {info['total_items']} —Ñ–∞–π–ª–æ–≤, {info['total_size_mb']:.1f} MB")

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ –∫—ç—à–∞
cache.cleanup_old_cache(days=7)
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `training.log`. –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `main.py`.

## üìù TODO

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É MLflow –¥–ª—è tracking —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å online learning
- [ ] –î–æ–±–∞–≤–∏—Ç—å A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–æ—Ä–≥–æ–≤—ã–º –±–æ—Ç–æ–º
- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## ü§ù –í–∫–ª–∞–¥

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏—è! –°–æ–∑–¥–∞–≤–∞–π—Ç–µ issues –∏ pull requests.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License