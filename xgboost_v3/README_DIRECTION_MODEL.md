# üéØ –ú–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã

## –û–ø–∏—Å–∞–Ω–∏–µ

–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ –∫ ML —Ç—Ä–µ–π–¥–∏–Ω–≥—É, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –ø—Ä–æ—Å—Ç–æ–º –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã –≤–º–µ—Å—Ç–æ —Å–ª–æ–∂–Ω—ã—Ö expected returns.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:
- ‚úÖ **–ü—Ä–æ—Å—Ç–∞—è —Ü–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è**: —Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞/—É–ø–∞–ª–∞ —á–µ—Ä–µ–∑ 1 —á–∞—Å
- ‚úÖ **Walk-Forward –∞–Ω–∞–ª–∏–∑**: –∑–æ–ª–æ—Ç–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è —Ç—Ä–µ–π–¥–∏–Ω–≥–∞
- ‚úÖ **–ù–µ—Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≥–æ—Ä–∏–∑–æ–Ω—Ç–æ–≤**: 5 –º–∏–Ω, 15 –º–∏–Ω, 1 —á–∞—Å, 4 —á–∞—Å–∞
- ‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –æ—Ç–±–æ—Ä –ø—Ä–∏–∑–Ω–∞–∫–æ–≤**: —Ç–æ–ø-50 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –Ω–∞ –∫–∞–∂–¥–æ–º –ø–µ—Ä–∏–æ–¥–µ
- ‚úÖ **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è**: –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ 30 –¥–Ω—è—Ö, —Ç–µ—Å—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö 7

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Å—Ç—ã—Ö —Ü–µ–ª–µ–≤—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (2 —Å–∏–º–≤–æ–ª–∞, 100k –∑–∞–ø–∏—Å–µ–π)
python init_simple_targets.py --test

# –ü–æ–ª–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
python init_simple_targets.py --symbols BTCUSDT ETHUSDT BNBUSDT XRPUSDT ADAUSDT

# –í—Å–µ —Å–∏–º–≤–æ–ª—ã —Å –ø–æ—Ä–æ–≥–æ–º 0.2%
python init_simple_targets.py --threshold 0.2
```

### 2. –ó–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏

```bash
# –ë–∞–∑–æ–≤–æ–µ –æ–±—É—á–µ–Ω–∏–µ (2 —Å–∏–º–≤–æ–ª–∞, 5 splits)
python train_direction_model.py

# –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
python train_direction_model.py \
    --symbols BTCUSDT ETHUSDT BNBUSDT XRPUSDT \
    --n-splits 10 \
    --target-type buy_signal_threshold_1hour
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `direction_model_results/YYYYMMDD_HHMMSS/`:
- `final_report.txt` - –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- `buy_metrics.json` / `sell_metrics.json` - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- `walk_forward_results.png` - –≥—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
- `feature_importance_comparison.png` - –≤–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

## üìä –¶–µ–ª–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### –ü—Ä–æ—Å—Ç—ã–µ –±–∏–Ω–∞—Ä–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
- `buy_signal_1hour` - —Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ —á–µ—Ä–µ–∑ 1 —á–∞—Å (–ª—é–±–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö)
- `sell_signal_1hour` - —Ü–µ–Ω–∞ —É–ø–∞–ª–∞ —á–µ—Ä–µ–∑ 1 —á–∞—Å (–ª—é–±–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤–Ω–∏–∑)

### –°–∏–≥–Ω–∞–ª—ã —Å –ø–æ—Ä–æ–≥–æ–º
- `buy_signal_threshold_1hour` - —Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 0.1%
- `sell_signal_threshold_1hour` - —Ü–µ–Ω–∞ —É–ø–∞–ª–∞ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 0.1%

### –ú—É–ª—å—Ç–∏–∫–ª–∞—Å—Å–æ–≤–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- 0: –°–∏–ª—å–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ (< -1%)
- 1: –°–ª–∞–±–æ–µ –ø–∞–¥–µ–Ω–∏–µ (-1% –¥–æ -0.1%)
- 2: –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ (-0.1% –¥–æ 0.1%)
- 3: –°–ª–∞–±—ã–π —Ä–æ—Å—Ç (0.1% –¥–æ 1%)
- 4: –°–∏–ª—å–Ω—ã–π —Ä–æ—Å—Ç (> 1%)

## üîç Walk-Forward –∞–Ω–∞–ª–∏–∑

–ú–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```
|-- Train 30d --|-- Gap 1h --|-- Test 7d --|
                |-- Train 30d --|-- Gap 1h --|-- Test 7d --|
                               |-- Train 30d --|-- Gap 1h --|-- Test 7d --|
```

- **Train**: 30 –¥–Ω–µ–π –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **Gap**: 1 —á–∞—Å –∑–∞–∑–æ—Ä (–∏–∑–±–µ–≥–∞–µ–º data leakage)
- **Test**: 7 –¥–Ω–µ–π –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ**: –∫–∞–∂–¥—ã–µ 7 –¥–Ω–µ–π –Ω–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ù–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç:
- **ROC-AUC**: 0.55-0.65 (–ª—É—á—à–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ 0.5)
- **Accuracy**: 52-59% (—Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –º–æ–∂–µ—Ç —É–ª—É—á—à–∞—Ç—å—Å—è)
- **Sharpe Ratio**: 1.5-3.0 (–ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏)

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –í `init_simple_targets.py`:
```python
min_movement_threshold = 0.1  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –¥–ª—è —Å–∏–≥–Ω–∞–ª–∞
horizons = {
    '5min': 0.33,    # –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
    '15min': 1,      # –û—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–π–º—Ñ—Ä–µ–π–º
    '1hour': 4,      # –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ
    '4hours': 16     # –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ
}
```

### –í `train_direction_model.py`:
```python
# Walk-forward –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
train_window_days = 30  # –û–∫–Ω–æ –æ–±—É—á–µ–Ω–∏—è
test_window_days = 7    # –û–∫–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
n_splits = 10          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–∏–æ–¥–æ–≤

# XGBoost –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
max_depth = 6
learning_rate = 0.05
n_estimators = 300
```

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `simple_targets`:
```sql
CREATE TABLE simple_targets (
    timestamp TIMESTAMP,
    symbol VARCHAR(20),
    close_price DECIMAL(20, 8),
    
    -- –ë—É–¥—É—â–∏–µ —Ü–µ–Ω—ã
    price_1hour DECIMAL(20, 8),
    
    -- –ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    change_1hour DECIMAL(10, 4),
    
    -- –ë–∏–Ω–∞—Ä–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
    buy_signal_1hour BOOLEAN,
    sell_signal_1hour BOOLEAN,
    
    -- –°–∏–≥–Ω–∞–ª—ã —Å –ø–æ—Ä–æ–≥–æ–º
    buy_signal_threshold_1hour BOOLEAN,
    sell_signal_threshold_1hour BOOLEAN
);
```

## üìù –ü—Ä–∏–º–µ—Ä—ã SQL –∑–∞–ø—Ä–æ—Å–æ–≤

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
SELECT 
    symbol,
    COUNT(*) as total,
    AVG(CASE WHEN buy_signal_threshold_1hour THEN 1 ELSE 0 END) * 100 as buy_pct,
    AVG(CASE WHEN sell_signal_threshold_1hour THEN 1 ELSE 0 END) * 100 as sell_pct
FROM simple_targets
WHERE change_1hour IS NOT NULL
GROUP BY symbol
ORDER BY total DESC;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
SELECT 
    symbol,
    AVG(change_1hour) as avg_change,
    STDDEV(change_1hour) as std_change,
    MIN(change_1hour) as min_change,
    MAX(change_1hour) as max_change
FROM simple_targets
WHERE change_1hour IS NOT NULL
GROUP BY symbol;
```

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤** –¥–ª—è –ø–µ—Ä–≤—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
2. **–ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤** –±–µ–∑ –ø–æ—Ä–æ–≥–∞
3. **–£–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ n_splits –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ** (5 ‚Üí 10 ‚Üí 20)
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** –º–µ—Ç—Ä–∏–∫ –º–µ–∂–¥—É splits

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–π –º–æ–¥–µ–ª–∏:

1. **–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö**: 51 —Å–∏–º–≤–æ–ª –≤–º–µ—Å—Ç–æ 2-4
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä–æ–≥–∏**: –Ω–∞–π—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π threshold
3. **–ê–Ω—Å–∞–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –º–æ–¥–µ–ª–∏ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–∏–∑–æ–Ω—Ç–æ–≤
4. **Feature engineering**: –¥–æ–±–∞–≤–∏—Ç—å order flow, volume profile
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç—Ä–µ–π–¥–∏–Ω–≥–æ–º**: –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- –ú–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç **–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å** –¥–≤–∏–∂–µ–Ω–∏—è, –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—é
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π **risk management** –ø—Ä–∏ —Ç–æ—Ä–≥–æ–≤–ª–µ
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ