#!/usr/bin/env python3
"""
–§–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —É–ª—É—á—à–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ XGBoost v3 —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
"""

import subprocess
import sys
import os

print("="*60)
print("üöÄ –§–ò–ù–ê–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø XGBoost v3")
print("="*60)
print("\nüìä –ö–õ–Æ–ß–ï–í–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø:")
print("  ‚úÖ –ü–æ—Ä–æ–≥ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏: 0.7% (–±–∞–ª–∞–Ω—Å –∫–ª–∞—Å—Å–æ–≤ ~20/80)")
print("  ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –≥–ª—É–±–∏–Ω–∞: max_depth 3-6 (–±—ã–ª–æ 6-10)")
print("  ‚úÖ –£—Å–∏–ª–µ–Ω–∞ —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è: gamma 1-5, min_child_weight 20-50")
print("  ‚úÖ –ú–µ—Ç—Ä–∏–∫–∞ –ø–æ—Ä–æ–≥–∞: gmean (—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)")
print("  ‚úÖ –ù–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏: price_change_1,3,5,10, momentum, –±–∏–Ω–∞—Ä–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã")
print("  ‚úÖ –ë–∞–∑–æ–≤—ã–π —á–∞—Å –∫–∞–∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–∑–Ω–∞–∫")
print("  ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω SMOTE, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è scale_pos_weight")
print("\nüìà –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:")
print("  ‚Ä¢ ROC-AUC > 0.52 (–±—ã–ª–æ 0.50)")
print("  ‚Ä¢ –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ precision/recall")
print("  ‚Ä¢ –ú–µ–Ω—å—à–µ false positives")
print("  ‚Ä¢ –°—Ç–∞–±–∏–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –±–µ–∑ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è")
print("\n" + "="*60)

# –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ –±–µ–∑ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ venv (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω)
cmd = 'python xgboost_v3/main.py --test-mode --optimize --ensemble-size 5'

print("\nüîß –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ...")
print(f"üìå –ö–æ–º–∞–Ω–¥–∞: {cmd}\n")

# –ó–∞–ø—É—Å–∫
try:
    subprocess.run(cmd, shell=True, check=True)
    print("\n‚úÖ –û–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!")
    print("üìÅ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ø–∞–ø–∫–µ logs/")
    print("\nüí° –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:")
    print("  ‚Ä¢ final_report.txt - –∏—Ç–æ–≥–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏")
    print("  ‚Ä¢ metrics.json - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
    print("  ‚Ä¢ plots/ - –≥—Ä–∞—Ñ–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è")
except subprocess.CalledProcessError as e:
    print(f"\n‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏: {e}")
    sys.exit(1)