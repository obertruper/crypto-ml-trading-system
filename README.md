# ML —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω–æ–≥–æ —Ä—ã–Ω–∫–∞

–°–∏—Å—Ç–µ–º–∞ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ü–µ–Ω –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5430 (–∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `config.yaml`).

–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü—ã:
```bash
python init_database.py
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.yaml`:
- –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å PostgreSQL –≤ —Å–µ–∫—Ü–∏–∏ `database`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∏—Å–∫-–ø—Ä–æ—Ñ–∏–ª—å –≤ —Å–µ–∫—Ü–∏–∏ `risk_profile`
- –°–ø–∏—Å–æ–∫ –º–æ–Ω–µ—Ç —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (51 –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞)

### 4. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

#### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
python download_data.py
```
‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~2-3 —á–∞—Å–∞ –¥–ª—è –≤—Å–µ—Ö –º–æ–Ω–µ—Ç

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ Bitcoin:
```python
# –í download_data.py —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É:
results = {'BTCUSDT': downloader.download_historical_data('BTCUSDT', interval, days)}
```

#### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞
```bash
python prepare_dataset.py
```
‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~30-60 –º–∏–Ω—É—Ç

#### –®–∞–≥ 3: –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
```bash
python train_model_postgres.py
```
‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~4-8 —á–∞—Å–æ–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç GPU)

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –ú–æ–¥–µ–ª–∏
–°–∏—Å—Ç–µ–º–∞ –æ–±—É—á–∞–µ—Ç 4 –º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è:
- **buy_profit_model** - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è +5.8% –¥–æ -1.1%
- **buy_loss_model** - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è -1.1% –¥–æ +5.8%
- **sell_profit_model** - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è -5.8% –¥–æ +1.1%
- **sell_loss_model** - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è +1.1% –¥–æ -5.8%

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (60+)
- –¢—Ä–µ–Ω–¥–æ–≤—ã–µ: EMA, ADX, MACD, Ichimoku, SAR
- –û—Å—Ü–∏–ª–ª—è—Ç–æ—Ä—ã: RSI, Stochastic, CCI, Williams %R
- –û–±—ä–µ–º–Ω—ã–µ: OBV, CMF, MFI
- –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å: ATR, Bollinger Bands, Donchian

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
```
crypto_trading/
‚îú‚îÄ‚îÄ raw_market_data         # –°—ã—Ä—ã–µ OHLCV –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ processed_market_data   # –î–∞–Ω–Ω—ã–µ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
‚îú‚îÄ‚îÄ model_metadata         # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ model_predictions      # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
‚îî‚îÄ‚îÄ training_sequences     # –û–±—É—á–∞—é—â–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç:
```python
{
    "buy_profit_probability": 0.78,   # 78% —à–∞–Ω—Å –ø—Ä–æ—Ñ–∏—Ç–∞ –¥–ª—è BUY
    "buy_loss_probability": 0.22,     # 22% —à–∞–Ω—Å —É–±—ã—Ç–∫–∞ –¥–ª—è BUY
    "sell_profit_probability": 0.65,  # 65% —à–∞–Ω—Å –ø—Ä–æ—Ñ–∏—Ç–∞ –¥–ª—è SELL
    "sell_loss_probability": 0.35     # 35% —à–∞–Ω—Å —É–±—ã—Ç–∫–∞ –¥–ª—è SELL
}
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
project/
‚îú‚îÄ‚îÄ config.yaml              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ init_database.py         # –°–æ–∑–¥–∞–Ω–∏–µ –ë–î
‚îú‚îÄ‚îÄ download_data.py         # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ prepare_dataset.py       # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞
‚îú‚îÄ‚îÄ train_model_postgres.py  # –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ trained_model/          # –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ buy_profit_model.h5
‚îÇ   ‚îú‚îÄ‚îÄ buy_loss_model.h5
‚îÇ   ‚îú‚îÄ‚îÄ sell_profit_model.h5
‚îÇ   ‚îú‚îÄ‚îÄ sell_loss_model.h5
‚îÇ   ‚îú‚îÄ‚îÄ scaler.pkl
‚îÇ   ‚îî‚îÄ‚îÄ feature_columns.json
‚îî‚îÄ‚îÄ plots/                  # –ì—Ä–∞—Ñ–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è
```

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.8+
- PostgreSQL 12+
- 16GB+ RAM
- GPU (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- 50GB+ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∏—Å–∫-–ø—Ä–æ—Ñ–∏–ª—è
–í `config.yaml` –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
```yaml
risk_profile:
  stop_loss_pct_buy: 0.989    # –í–∞—à SL –¥–ª—è BUY
  take_profit_pct_buy: 1.058  # –í–∞—à TP –¥–ª—è BUY
  stop_loss_pct_sell: 1.011   # –í–∞—à SL –¥–ª—è SELL
  take_profit_pct_sell: 0.942 # –í–∞—à TP –¥–ª—è SELL
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–æ–Ω–µ—Ç
–î–æ–±–∞–≤—å—Ç–µ —Å–∏–º–≤–æ–ª—ã –≤ `config.yaml`:
```yaml
data_download:
  symbols:
    - NEWUSDT
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ë–î:
```sql
SELECT symbol, COUNT(*) FROM raw_market_data GROUP BY symbol;
SELECT * FROM model_metadata ORDER BY created_at DESC;
```

## üö® –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
pg_ctl status

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç –≤ config.yaml (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 5430)
```

### –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏
–£–º–µ–Ω—å—à–∏—Ç–µ batch_size –≤ `config.yaml`:
```yaml
model:
  batch_size: 16  # –≤–º–µ—Å—Ç–æ 32
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–Ω–µ—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞, –∏–∑–º–µ–Ω–∏–≤ —Å–ø–∏—Å–æ–∫ –≤ `config.yaml`.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞
–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏ –∏ –ª–æ–≥–∞–º–∏.