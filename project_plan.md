# –ü–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞: ML —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∫—Ä–∏–ø—Ç–æ—Ç—Ä–µ–π–¥–∏–Ω–≥–∞ —Å PostgreSQL

## üóÇÔ∏è –ò—Ç–æ–≥–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã:

```
project/
‚îú‚îÄ‚îÄ download_data.py          # –°–∫—Ä–∏–ø—Ç –≤—ã–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL
‚îú‚îÄ‚îÄ prepare_dataset.py        # –°–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞ –∏–∑ –ë–î
‚îú‚îÄ‚îÄ train_model.py           # –°–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ database/                  # –ú–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ connection.py         # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ models.py            # ORM –º–æ–¥–µ–ª–∏ (SQLAlchemy)
‚îÇ   ‚îî‚îÄ‚îÄ migrations.py        # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
‚îú‚îÄ‚îÄ processed_data/           # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ feature_columns.txt
‚îÇ   ‚îî‚îÄ‚îÄ ... (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
‚îú‚îÄ‚îÄ trained_model/           # –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ buy_profit_model.h5
‚îÇ   ‚îú‚îÄ‚îÄ buy_loss_model.h5  
‚îÇ   ‚îú‚îÄ‚îÄ sell_profit_model.h5
‚îÇ   ‚îú‚îÄ‚îÄ sell_loss_model.h5
‚îÇ   ‚îú‚îÄ‚îÄ scaler.pkl
‚îÇ   ‚îú‚îÄ‚îÄ feature_columns.json
‚îÇ   ‚îî‚îÄ‚îÄ model_config.json
‚îú‚îÄ‚îÄ plots/                  # –ì—Ä–∞—Ñ–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ training_history.png
‚îÇ   ‚îî‚îÄ‚îÄ accuracy_history.png
‚îú‚îÄ‚îÄ config.yaml            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

PostgreSQL Database:
‚îú‚îÄ‚îÄ Tables:
‚îÇ   ‚îú‚îÄ‚îÄ raw_klines         # –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–≤–µ—á–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ processed_features # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∏—á–∏
‚îÇ   ‚îî‚îÄ‚îÄ model_predictions  # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –º–æ–¥–µ–ª–∏
```

## ‚ö° –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã (–ø–æ—à–∞–≥–æ–≤–æ):

### –®–∞–≥ 0: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
createdb crypto_ml

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü
python database/migrations.py
```

### –®–∞–≥ 1: –í—ã–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
python download_data.py
```
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç 3 –≥–æ–¥–∞ 15-–º–∏–Ω—É—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è 50 –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É `raw_klines` PostgreSQL
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~2-3 —á–∞—Å–∞

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞
```bash
python prepare_dataset.py
```
- –ß–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `raw_klines`
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏–∑ Pine Script
- –°–æ–∑–¥–∞–µ—Ç –º–µ—Ç–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∏—Å–∫-–ø—Ä–æ—Ñ–∏–ª—è (SL/TP —É—Ä–æ–≤–Ω–∏)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É `processed_features`
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~30-60 –º–∏–Ω—É—Ç

### –®–∞–≥ 3: –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
```bash
python train_model.py
```
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `processed_features`
- –û–±—É—á–∞–µ—Ç 4 –º–æ–¥–µ–ª–∏: buy_profit, buy_loss, sell_profit, sell_loss
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Temporal Fusion Transformer –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–æ–¥–µ–ª–∏ –≤ –ø–∞–ø–∫—É `trained_model/`
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~4-8 —á–∞—Å–æ–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç GPU)

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—É—á–µ–Ω–∏—è:
–ú–æ–¥–µ–ª—å –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞:
```python
prediction = {
    "buy_profit_probability": 0.78,    # 78% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏—á—å +5.8% —Ä–∞–Ω—å—à–µ -1.1%
    "buy_loss_probability": 0.22,      # 22% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏—á—å -1.1% —Ä–∞–Ω—å—à–µ +5.8%
    "sell_profit_probability": 0.15,   # 15% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏—á—å -5.8% —Ä–∞–Ω—å—à–µ +1.1%
    "sell_loss_probability": 0.85      # 85% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏—á—å +1.1% —Ä–∞–Ω—å—à–µ -5.8%
}
```

## üîß –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚úÖ **PostgreSQL —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** - –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–†–µ–∞–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—á–Ω—ã–µ SL/TP –∏–∑ config.yaml
- ‚úÖ **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - –º–æ–¥–µ–ª—å –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç 15 —á–∞—Å–æ–≤ –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ **–í—Å–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** - —Ç–æ—á–Ω–æ —Ç–µ –∂–µ —á—Ç–æ –≤ Pine Script (60+ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤)
- ‚úÖ **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –∫–ª–∞—Å—Å–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∏—Å–±–∞–ª–∞–Ω—Å –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Walk-forward –≤–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç overfitting
- ‚úÖ **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - –º–æ–∂–Ω–æ –¥–æ–∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
–ü—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å:
- Accuracy: 65-75%
- Precision: 60-70%
- Recall: 55-65%
- AUC Score: 70-80%

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ PostgreSQL –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
1. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–µ—Ä–∞–±–∞–π—Ç–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
2. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ë–î
3. **–ò–Ω–¥–µ–∫—Å—ã** - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –º–µ—Ç–∫–∞–º –∏ —Å–∏–º–≤–æ–ª–∞–º
4. **–ë—ç–∫–∞–ø—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
5. **SQL –∑–∞–ø—Ä–æ—Å—ã** - –≥–∏–±–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
6. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–∞—à–µ–π —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π! üöÄ